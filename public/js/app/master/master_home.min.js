$(document).on('click', '.pushMenu', function () { let comm = $(this).attr('data-comm'); if (comm == 'deldflag') { $(this).attr("data-comm", "adddflag"); $('.noAuthSidebar').removeClass('d-flex') } else { $(this).attr("data-comm", "deldflag"); $('.noAuthSidebar').addClass('d-flex') } });
function mediascreen(x) { if (x.matches) { $('.dropdown-menu').removeClass('dropdown-menu-xl'); $('.dropdown-menu').addClass('dropdown-menu-lg') } else { $('.dropdown-menu').removeClass('dropdown-menu-lg'); $('.dropdown-menu').addClass('dropdown-menu-xl') } }
var x = window.matchMedia("(max-width: 600px)"); mediascreen(x); x.addListener(mediascreen)
const Request = (segment) => {
    var url = $(location).attr('href'), split = url.split("/"), resSegment = split[2 + segment]; return resSegment ? resSegment : null;
}
// axios.get('url').then(response => console.log(response.data)).catch(error => toastWarning(error));

const sidebarLinkCall = () => {
    axios.get(`/api/allowed-link`, { params: { _type: 'sidebar' }, timeout: 5000 }).then(response => { sidebarLinkBar(response.data.response_data[0]) }).catch(error => toastError(error));
}
const sidebarLinkBar = (data) => {
    let link = `<ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">`;
    let dataSort = data.sort((a, b) => a.index.localeCompare(b.index));
    dataSort.forEach(sidebar => {
        link += `<li class="nav-item">
        <a href="${sidebar.link}" class="nav-link userLink${(Request(1) == sidebar.link.substr(1)) ? ' active' : ''}">
        <i class="${sidebar.icon}"></i>&ensp;
        <p class="text-sm">${sidebar.name}</p></a></li>`
    });
    link += `</ul>`;
    $('#sidebarLink').html(link);
}
const panelLogin = () => {
    let login = `<div><ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false"><li class="nav-item"><a href="/signin" class="nav-link active"><i class="fas fa-sign-in-alt fa-sm"></i>&ensp;<p class="text-sm text-bold">Sign In</p></a></li></ul></div><div><ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false"><li class="nav-item"><a href="/register" class="nav-link active"><i class="fas fa-user-plus fa-sm"></i>&ensp;<p class="text-sm text-bold">Register</p></a></li></ul></div>`;
    $('#sidebarLoginPanel').html(login);
}
$(sidebarLinkCall());
